{
  "$jason": {
    "head": {
      "title": "Giffy Merchant - Sales",
      "description": "This app enable merchant to  accept digital gift card powered by Giffy",
      "actions": {
        "$load": {
          "type": "$network.request",
          "options": {
            "url": "https://giffynet.github.io/jasonelle/programme.json",
            "method": "get",
            "header" : {
              "Authorization" : "Bearer {{$global.jwt_token}}"
            }
          },
          "success": {
            "type": "$render"
          },
          "error": {
            "type": "$util.alert",
            "options": {
              "title": "ERROR",
              "description": "Unable to  fetch programmes from server. Please check your internet connection."
            }
          }
        }
      },
      "templates": {
        "body": {
          "background": "#f3f3f3",
          "header": {
            "title": {
              "type": "image",
              "url": "https://giffynet.github.io/jasonelle/giffy_circle_small.png"
            },
            "style": {
              "background": "#BC845C"
            },
            "search": {
              "name": "query_text",
              "placeholder": "Enter Keywords",
              "style": {
                "background": "#f3f3f3"
              }
            }
          },
          "sections": [{
            "items": {
              "{{#each $jason.programmes}}": {
                "type": "vertical",
                "style": {
                  "align": "center",
                  "padding": "20",
                  "distribution": "equalspacing"
                },
                "components": [{
                  "type": "label",
                  "text": "{{name}}",
                  "style": {
                    "size": "18"
                  }
                },{
                  "type": "label",
                  "text": "Currency: {{currency}}, Reloadable: {{reloadable}}, Single Use: {{single_use}}",
                  "style": {
                    "size": "12"
                  }
                },{
                  "type": "button",
                  "url": "{{image_url}}",
                  "action": {
                    "type": "$util.alert",
                    "options": {
                      "title": "{{name}}",
                      "description": "Please enter initial amount as the gift card balance",
                      "form": [{
                        "name": "sales_amount",
                        "placeholder": "e.g. 100",
                        "value": [
                          {
                            "{{#if default_value>0}}": "{{default_value}}"
                          },
                          {
                            "{{#else}}": ""
                          }
                        ]
                      }]
                    },
                    "success": {
                      "type": "$global.set",
                      "options": {
                        "sales_amount": "{{$jason.sales_amount}}",
                        "programme_id": "{{programme_id}}"
                      },
                      "success": {
                        "type": "$href",
                        "options": {
                          "url": "https://giffynet.github.io/jasonelle/merchantapp_sales_byqrcode.json",
                          "transition": "push"
                        }
                      }
                    },
                    "error": {
                      "type": "$util.toast",
                      "options": {
                        "text": "Sales is cancelled",
                        "type": "warning"
                      }
                    }
                  }
                }]
              }
            }
          }]
        }
      }
    }
  }
}
